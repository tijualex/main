{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Your content for this page goes here -->

<!-- CONTENT WRAPPER -->
<div class="ec-content-wrapper">
    <div class="content">
        <div class="breadcrumb-wrapper d-flex align-items-center justify-content-between">
            <div>
                <h1>All Top Models</h1>
                <p class="breadcrumbs">
                    <span><a href="{% url 'admin_index' %}">Home</a></span>
                    <span><i class="mdi mdi-chevron-right"></i></span>All Top Models
                </p>
            </div>
            <div>
                <a href="{% url 'add_top_pattern' %}" class="btn btn-primary"> Add Top Model</a>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Image</th>
                        <th>Dress Type</th>
                        <th>Price</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for top_pattern in top_patterns %}
                    <tr>
                        <td>{{ top_pattern.custom_id }}</td>
                        <td>{{ top_pattern.name }}</td>
                        <td>
                            <img src="{{ top_pattern.image.url }}" alt="{{ top_pattern.name }}" width="100" height="100">
                        </td>
                        <td>{{ top_pattern.dress_type.dress_type }}</td>
                        <td>${{ top_pattern.price }}</td>
                        <td>
                            <!-- Update Top Pattern Button -->
                            <a class="btn btn-primary btn-sm update-top-pattern" href="#" data-top-pattern-id="{{ top_pattern.id }}">Update</a>

                            <!-- Delete Top Pattern Button -->
                            <a class="btn btn-danger btn-sm delete-top-pattern" href="#" data-top-pattern-id="{{ top_pattern.id }}">Delete</a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6">No top models available.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</div>

<!-- Add JavaScript for selection and highlighting -->
<script>
    $(document).ready(function () {
        $('.table tbody tr').hover(function () {
            // Mouse over
            $(this).addClass('bg-primary text-white');
        }, function () {
            // Mouse out
            $(this).removeClass('bg-primary text-white');
        });

        $('.table tbody tr').click(function () {
            // Clicked
            $('.table tbody tr').removeClass('selected'); // Deselect all
            $(this).addClass('selected');
            
            // Get the selected top pattern ID
            var topPatternId = $(this).find('.update-top-pattern').data('top-pattern-id');
            console.log('Selected Top Pattern ID: ' + topPatternId);
        });
    });
</script>

{% endblock %}
